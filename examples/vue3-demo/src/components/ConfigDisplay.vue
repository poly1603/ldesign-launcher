<template>
  <div class="config-display">
    <div class="config-header" @click="isExpanded = !isExpanded">
      <h3>
        <span class="config-icon">{{ isExpanded ? 'ğŸ“‚' : 'ğŸ“' }}</span>
        åº”ç”¨é…ç½®
      </h3>
      <span class="config-env-badge" :data-env="environment.mode">
        {{ environment.mode }}
      </span>
    </div>

    <div v-if="isExpanded" class="config-body">
      <!-- åº”ç”¨ä¿¡æ¯ -->
      <div class="config-section">
        <h4 class="config-section-title">
          <span class="section-icon">ğŸ“±</span>
          åº”ç”¨ä¿¡æ¯
        </h4>
        <div class="config-grid">
          <div class="config-item">
            <span class="config-label">åç§°</span>
            <span class="config-value">{{ config.app.name }}</span>
          </div>
          <div class="config-item">
            <span class="config-label">ç‰ˆæœ¬</span>
            <span class="config-value config-value-version">{{ config.app.version }}</span>
          </div>
          <div class="config-item config-item-full">
            <span class="config-label">æè¿°</span>
            <span class="config-value">{{ config.app.description }}</span>
          </div>
        </div>
      </div>

      <!-- API é…ç½® -->
      <div class="config-section">
        <h4 class="config-section-title">
          <span class="section-icon">ğŸŒ</span>
          API é…ç½®
        </h4>
        <div class="config-grid">
          <div class="config-item config-item-full">
            <span class="config-label">Base URL</span>
            <span class="config-value config-value-url">{{ config.api.baseUrl }}</span>
          </div>
          <div class="config-item">
            <span class="config-label">è¶…æ—¶æ—¶é—´</span>
            <span class="config-value">{{ config.api.timeout }}ms</span>
          </div>
        </div>
      </div>

      <!-- åŠŸèƒ½å¼€å…³ -->
      <div class="config-section">
        <h4 class="config-section-title">
          <span class="section-icon">ğŸ›ï¸</span>
          åŠŸèƒ½å¼€å…³
        </h4>
        <div class="config-grid">
          <div class="config-item">
            <span class="config-label">æ•°æ®åˆ†æ</span>
            <span :class="['config-value', 'config-toggle', config.features.enableAnalytics ? 'active' : '']">
              {{ config.features.enableAnalytics ? 'âœ… å¼€å¯' : 'âŒ å…³é—­' }}
            </span>
          </div>
          <div class="config-item">
            <span class="config-label">è°ƒè¯•æ¨¡å¼</span>
            <span :class="['config-value', 'config-toggle', config.features.enableDebug ? 'active' : '']">
              {{ config.features.enableDebug ? 'âœ… å¼€å¯' : 'âŒ å…³é—­' }}
            </span>
          </div>
        </div>
      </div>

      <!-- ç¯å¢ƒå˜é‡ -->
      <div class="config-section">
        <h4 class="config-section-title">
          <span class="section-icon">ğŸ”§</span>
          ç¯å¢ƒä¿¡æ¯
        </h4>
        <div class="config-grid">
          <div class="config-item">
            <span class="config-label">æ¨¡å¼</span>
            <span class="config-value config-value-mode">{{ environment.mode }}</span>
          </div>
          <div class="config-item">
            <span class="config-label">å¼€å‘æ¨¡å¼</span>
            <span :class="['config-value', 'config-toggle', environment.isDev ? 'active' : '']">
              {{ environment.isDev ? 'âœ… æ˜¯' : 'âŒ å¦' }}
            </span>
          </div>
          <div class="config-item">
            <span class="config-label">ç”Ÿäº§æ¨¡å¼</span>
            <span :class="['config-value', 'config-toggle', environment.isProd ? 'active' : '']">
              {{ environment.isProd ? 'âœ… æ˜¯' : 'âŒ å¦' }}
            </span>
          </div>
        </div>
      </div>
    </div>


  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue'
import { useAppConfig } from '@ldesign/launcher/client/vue'
import './ConfigDisplay.css'

// ğŸ‰ ä½¿ç”¨æ–°çš„ useAppConfig Composable - è‡ªåŠ¨å¤„ç† HMRï¼
const { config, environment } = useAppConfig()
const isExpanded = ref(true)
</script>
